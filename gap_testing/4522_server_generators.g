LoadPackage("json");

#Define the Symmetry Group
GRP_RED := Group((129,257)(130,258)(131,259)(132,260)(133,261)(134,262)(135,263)(136,264)(137,265)(138,266)(139,267)(140,268)(141,269)(142,270)(143,271)(144,272)(145,273)(146,274)(147,275)(148,276)(149,277)(150,278)(151,279)(152,280)(153,281)(154,282)(155,283)(156,284)(157,285)(158,286)(159,287)(160,288)(161,289)(162,290)(163,291)(164,292)(165,293)(166,294)(167,295)(168,296)(169,297)(170,298)(171,299)(172,300)(173,301)(174,302)(175,303)(176,304)(177,305)(178,306)(179,307)(180,308)(181,309)(182,310)(183,311)(184,312)(185,313)(186,314)(187,315)(188,316)(189,317)(190,318)(191,319)(192,320)(193,321)(194,322)(195,323)(196,324)(197,325)(198,326)(199,327)(200,328)(201,329)(202,330)(203,331)(204,332)(205,333)(206,334)(207,335)(208,336)(209,337)(210,338)(211,339)(212,340)(213,341)(214,342)(215,343)(216,344)(217,345)(218,346)(219,347)(220,348)(221,349)(222,350)(223,351)(224,352)(225,353)(226,354)(227,355)(228,356)(229,357)(230,358)(231,359)(232,360)(233,361)(234,362)(235,363)(236,364)(237,365)(238,366)(239,367)(240,368)(241,369)(242,370)(243,371)(244,372)(245,373)(246,374)(247,375)(248,376)(249,377)(250,378)(251,379)(252,380)(253,381)(254,382)(255,383)(256,384),
(65,257)(66,258)(67,259)(68,260)(69,261)(70,262)(71,263)(72,264)(73,265)(74,266)(75,267)(76,268)(77,269)(78,270)(79,271)(80,272)(81,273)(82,274)(83,275)(84,276)(85,277)(86,278)(87,279)(88,280)(89,281)(90,282)(91,283)(92,284)(93,285)(94,286)(95,287)(96,288)(97,289)(98,290)(99,291)(100,292)(101,293)(102,294)(103,295)(104,296)(105,297)(106,298)(107,299)(108,300)(109,301)(110,302)(111,303)(112,304)(113,305)(114,306)(115,307)(116,308)(117,309)(118,310)(119,311)(120,312)(121,313)(122,314)(123,315)(124,316)(125,317)(126,318)(127,319)(128,320)(193,385)(194,386)(195,387)(196,388)(197,389)(198,390)(199,391)(200,392)(201,393)(202,394)(203,395)(204,396)(205,397)(206,398)(207,399)(208,400)(209,401)(210,402)(211,403)(212,404)(213,405)(214,406)(215,407)(216,408)(217,409)(218,410)(219,411)(220,412)(221,413)(222,414)(223,415)(224,416)(225,417)(226,418)(227,419)(228,420)(229,421)(230,422)(231,423)(232,424)(233,425)(234,426)(235,427)(236,428)(237,429)(238,430)(239,431)(240,432)(241,433)(242,434)(243,435)(244,436)(245,437)(246,438)(247,439)(248,440)(249,441)(250,442)(251,443)(252,444)(253,445)(254,446)(255,447)(256,448),
(33,257)(34,258)(35,259)(36,260)(37,261)(38,262)(39,263)(40,264)(41,265)(42,266)(43,267)(44,268)(45,269)(46,270)(47,271)(48,272)(49,273)(50,274)(51,275)(52,276)(53,277)(54,278)(55,279)(56,280)(57,281)(58,282)(59,283)(60,284)(61,285)(62,286)(63,287)(64,288)(97,321)(98,322)(99,323)(100,324)(101,325)(102,326)(103,327)(104,328)(105,329)(106,330)(107,331)(108,332)(109,333)(110,334)(111,335)(112,336)(113,337)(114,338)(115,339)(116,340)(117,341)(118,342)(119,343)(120,344)(121,345)(122,346)(123,347)(124,348)(125,349)(126,350)(127,351)(128,352)(161,385)(162,386)(163,387)(164,388)(165,389)(166,390)(167,391)(168,392)(169,393)(170,394)(171,395)(172,396)(173,397)(174,398)(175,399)(176,400)(177,401)(178,402)(179,403)(180,404)(181,405)(182,406)(183,407)(184,408)(185,409)(186,410)(187,411)(188,412)(189,413)(190,414)(191,415)(192,416)(225,449)(226,450)(227,451)(228,452)(229,453)(230,454)(231,455)(232,456)(233,457)(234,458)(235,459)(236,460)(237,461)(238,462)(239,463)(240,464)(241,465)(242,466)(243,467)(244,468)(245,469)(246,470)(247,471)(248,472)(249,473)(250,474)(251,475)(252,476)(253,477)(254,478)(255,479)(256,480),
(9,17)(10,18)(11,19)(12,20)(13,21)(14,22)(15,23)(16,24)(41,49)(42,50)(43,51)(44,52)(45,53)(46,54)(47,55)(48,56)(73,81)(74,82)(75,83)(76,84)(77,85)(78,86)(79,87)(80,88)(105,113)(106,114)(107,115)(108,116)(109,117)(110,118)(111,119)(112,120)(137,145)(138,146)(139,147)(140,148)(141,149)(142,150)(143,151)(144,152)(169,177)(170,178)(171,179)(172,180)(173,181)(174,182)(175,183)(176,184)(201,209)(202,210)(203,211)(204,212)(205,213)(206,214)(207,215)(208,216)(233,241)(234,242)(235,243)(236,244)(237,245)(238,246)(239,247)(240,248)(265,273)(266,274)(267,275)(268,276)(269,277)(270,278)(271,279)(272,280)(297,305)(298,306)(299,307)(300,308)(301,309)(302,310)(303,311)(304,312)(329,337)(330,338)(331,339)(332,340)(333,341)(334,342)(335,343)(336,344)(361,369)(362,370)(363,371)(364,372)(365,373)(366,374)(367,375)(368,376)(393,401)(394,402)(395,403)(396,404)(397,405)(398,406)(399,407)(400,408)(425,433)(426,434)(427,435)(428,436)(429,437)(430,438)(431,439)(432,440)(457,465)(458,466)(459,467)(460,468)(461,469)(462,470)(463,471)(464,472)(489,497)(490,498)(491,499)(492,500)(493,501)(494,502)(495,503)(496,504),
(5,17)(6,18)(7,19)(8,20)(13,25)(14,26)(15,27)(16,28)(37,49)(38,50)(39,51)(40,52)(45,57)(46,58)(47,59)(48,60)(69,81)(70,82)(71,83)(72,84)(77,89)(78,90)(79,91)(80,92)(101,113)(102,114)(103,115)(104,116)(109,121)(110,122)(111,123)(112,124)(133,145)(134,146)(135,147)(136,148)(141,153)(142,154)(143,155)(144,156)(165,177)(166,178)(167,179)(168,180)(173,185)(174,186)(175,187)(176,188)(197,209)(198,210)(199,211)(200,212)(205,217)(206,218)(207,219)(208,220)(229,241)(230,242)(231,243)(232,244)(237,249)(238,250)(239,251)(240,252)(261,273)(262,274)(263,275)(264,276)(269,281)(270,282)(271,283)(272,284)(293,305)(294,306)(295,307)(296,308)(301,313)(302,314)(303,315)(304,316)(325,337)(326,338)(327,339)(328,340)(333,345)(334,346)(335,347)(336,348)(357,369)(358,370)(359,371)(360,372)(365,377)(366,378)(367,379)(368,380)(389,401)(390,402)(391,403)(392,404)(397,409)(398,410)(399,411)(400,412)(421,433)(422,434)(423,435)(424,436)(429,441)(430,442)(431,443)(432,444)(453,465)(454,466)(455,467)(456,468)(461,473)(462,474)(463,475)(464,476)(485,497)(486,498)(487,499)(488,500)(493,505)(494,506)(495,507)(496,508),
(3,17)(4,18)(7,21)(8,22)(11,25)(12,26)(15,29)(16,30)(35,49)(36,50)(39,53)(40,54)(43,57)(44,58)(47,61)(48,62)(67,81)(68,82)(71,85)(72,86)(75,89)(76,90)(79,93)(80,94)(99,113)(100,114)(103,117)(104,118)(107,121)(108,122)(111,125)(112,126)(131,145)(132,146)(135,149)(136,150)(139,153)(140,154)(143,157)(144,158)(163,177)(164,178)(167,181)(168,182)(171,185)(172,186)(175,189)(176,190)(195,209)(196,210)(199,213)(200,214)(203,217)(204,218)(207,221)(208,222)(227,241)(228,242)(231,245)(232,246)(235,249)(236,250)(239,253)(240,254)(259,273)(260,274)(263,277)(264,278)(267,281)(268,282)(271,285)(272,286)(291,305)(292,306)(295,309)(296,310)(299,313)(300,314)(303,317)(304,318)(323,337)(324,338)(327,341)(328,342)(331,345)(332,346)(335,349)(336,350)(355,369)(356,370)(359,373)(360,374)(363,377)(364,378)(367,381)(368,382)(387,401)(388,402)(391,405)(392,406)(395,409)(396,410)(399,413)(400,414)(419,433)(420,434)(423,437)(424,438)(427,441)(428,442)(431,445)(432,446)(451,465)(452,466)(455,469)(456,470)(459,473)(460,474)(463,477)(464,478)(483,497)(484,498)(487,501)(488,502)(491,505)(492,506)(495,509)(496,510),
(2,17)(4,19)(6,21)(8,23)(10,25)(12,27)(14,29)(16,31)(34,49)(36,51)(38,53)(40,55)(42,57)(44,59)(46,61)(48,63)(66,81)(68,83)(70,85)(72,87)(74,89)(76,91)(78,93)(80,95)(98,113)(100,115)(102,117)(104,119)(106,121)(108,123)(110,125)(112,127)(130,145)(132,147)(134,149)(136,151)(138,153)(140,155)(142,157)(144,159)(162,177)(164,179)(166,181)(168,183)(170,185)(172,187)(174,189)(176,191)(194,209)(196,211)(198,213)(200,215)(202,217)(204,219)(206,221)(208,223)(226,241)(228,243)(230,245)(232,247)(234,249)(236,251)(238,253)(240,255)(258,273)(260,275)(262,277)(264,279)(266,281)(268,283)(270,285)(272,287)(290,305)(292,307)(294,309)(296,311)(298,313)(300,315)(302,317)(304,319)(322,337)(324,339)(326,341)(328,343)(330,345)(332,347)(334,349)(336,351)(354,369)(356,371)(358,373)(360,375)(362,377)(364,379)(366,381)(368,383)(386,401)(388,403)(390,405)(392,407)(394,409)(396,411)(398,413)(400,415)(418,433)(420,435)(422,437)(424,439)(426,441)(428,443)(430,445)(432,447)(450,465)(452,467)(454,469)(456,471)(458,473)(460,475)(462,477)(464,479)(482,497)(484,499)(486,501)(488,503)(490,505)(492,507)(494,509)(496,511),
(1,257)(2,258)(3,259)(4,260)(5,261)(6,262)(7,263)(8,264)(9,265)(10,266)(11,267)(12,268)(13,269)(14,270)(15,271)(16,272)(17,273)(18,274)(19,275)(20,276)(21,277)(22,278)(23,279)(24,280)(25,281)(26,282)(27,283)(28,284)(29,285)(30,286)(31,287)(32,288)(33,289)(34,290)(35,291)(36,292)(37,293)(38,294)(39,295)(40,296)(41,297)(42,298)(43,299)(44,300)(45,301)(46,302)(47,303)(48,304)(49,305)(50,306)(51,307)(52,308)(53,309)(54,310)(55,311)(56,312)(57,313)(58,314)(59,315)(60,316)(61,317)(62,318)(63,319)(64,320)(65,321)(66,322)(67,323)(68,324)(69,325)(70,326)(71,327)(72,328)(73,329)(74,330)(75,331)(76,332)(77,333)(78,334)(79,335)(80,336)(81,337)(82,338)(83,339)(84,340)(85,341)(86,342)(87,343)(88,344)(89,345)(90,346)(91,347)(92,348)(93,349)(94,350)(95,351)(96,352)(97,353)(98,354)(99,355)(100,356)(101,357)(102,358)(103,359)(104,360)(105,361)(106,362)(107,363)(108,364)(109,365)(110,366)(111,367)(112,368)(113,369)(114,370)(115,371)(116,372)(117,373)(118,374)(119,375)(120,376)(121,377)(122,378)(123,379)(124,380)(125,381)(126,382)(127,383)(128,384)(129,385)(130,386)(131,387)(132,388)(133,389)(134,390)(135,391)(136,392)(137,393)(138,394)(139,395)(140,396)(141,397)(142,398)(143,399)(144,400)(145,401)(146,402)(147,403)(148,404)(149,405)(150,406)(151,407)(152,408)(153,409)(154,410)(155,411)(156,412)(157,413)(158,414)(159,415)(160,416)(161,417)(162,418)(163,419)(164,420)(165,421)(166,422)(167,423)(168,424)(169,425)(170,426)(171,427)(172,428)(173,429)(174,430)(175,431)(176,432)(177,433)(178,434)(179,435)(180,436)(181,437)(182,438)(183,439)(184,440)(185,441)(186,442)(187,443)(188,444)(189,445)(190,446)(191,447)(192,448)(193,449)(194,450)(195,451)(196,452)(197,453)(198,454)(199,455)(200,456)(201,457)(202,458)(203,459)(204,460)(205,461)(206,462)(207,463)(208,464)(209,465)(210,466)(211,467)(212,468)(213,469)(214,470)(215,471)(216,472)(217,473)(218,474)(219,475)(220,476)(221,477)(222,478)(223,479)(224,480)(225,481)(226,482)(227,483)(228,484)(229,485)(230,486)(231,487)(232,488)(233,489)(234,490)(235,491)(236,492)(237,493)(238,494)(239,495)(240,496)(241,497)(242,498)(243,499)(244,500)(245,501)(246,502)(247,503)(248,504)(249,505)(250,506)(251,507)(252,508)(253,509)(254,510)(255,511)(256,512),
(1,17)(2,18)(3,19)(4,20)(5,21)(6,22)(7,23)(8,24)(9,25)(10,26)(11,27)(12,28)(13,29)(14,30)(15,31)(16,32)(33,49)(34,50)(35,51)(36,52)(37,53)(38,54)(39,55)(40,56)(41,57)(42,58)(43,59)(44,60)(45,61)(46,62)(47,63)(48,64)(65,81)(66,82)(67,83)(68,84)(69,85)(70,86)(71,87)(72,88)(73,89)(74,90)(75,91)(76,92)(77,93)(78,94)(79,95)(80,96)(97,113)(98,114)(99,115)(100,116)(101,117)(102,118)(103,119)(104,120)(105,121)(106,122)(107,123)(108,124)(109,125)(110,126)(111,127)(112,128)(129,145)(130,146)(131,147)(132,148)(133,149)(134,150)(135,151)(136,152)(137,153)(138,154)(139,155)(140,156)(141,157)(142,158)(143,159)(144,160)(161,177)(162,178)(163,179)(164,180)(165,181)(166,182)(167,183)(168,184)(169,185)(170,186)(171,187)(172,188)(173,189)(174,190)(175,191)(176,192)(193,209)(194,210)(195,211)(196,212)(197,213)(198,214)(199,215)(200,216)(201,217)(202,218)(203,219)(204,220)(205,221)(206,222)(207,223)(208,224)(225,241)(226,242)(227,243)(228,244)(229,245)(230,246)(231,247)(232,248)(233,249)(234,250)(235,251)(236,252)(237,253)(238,254)(239,255)(240,256)(257,273)(258,274)(259,275)(260,276)(261,277)(262,278)(263,279)(264,280)(265,281)(266,282)(267,283)(268,284)(269,285)(270,286)(271,287)(272,288)(289,305)(290,306)(291,307)(292,308)(293,309)(294,310)(295,311)(296,312)(297,313)(298,314)(299,315)(300,316)(301,317)(302,318)(303,319)(304,320)(321,337)(322,338)(323,339)(324,340)(325,341)(326,342)(327,343)(328,344)(329,345)(330,346)(331,347)(332,348)(333,349)(334,350)(335,351)(336,352)(353,369)(354,370)(355,371)(356,372)(357,373)(358,374)(359,375)(360,376)(361,377)(362,378)(363,379)(364,380)(365,381)(366,382)(367,383)(368,384)(385,401)(386,402)(387,403)(388,404)(389,405)(390,406)(391,407)(392,408)(393,409)(394,410)(395,411)(396,412)(397,413)(398,414)(399,415)(400,416)(417,433)(418,434)(419,435)(420,436)(421,437)(422,438)(423,439)(424,440)(425,441)(426,442)(427,443)(428,444)(429,445)(430,446)(431,447)(432,448)(449,465)(450,466)(451,467)(452,468)(453,469)(454,470)(455,471)(456,472)(457,473)(458,474)(459,475)(460,476)(461,477)(462,478)(463,479)(464,480)(481,497)(482,498)(483,499)(484,500)(485,501)(486,502)(487,503)(488,504)(489,505)(490,506)(491,507)(492,508)(493,509)(494,510)(495,511)(496,512)
);

# Storage for all polytopes found
all_polys := [];

# setup files
outfile := IO_File("/home/chris/fromgap.pipe", "w");
infile := IO_File("/home/chris/togap.pipe", "r");

while true do

        # read command from input
        str := IO_ReadLine(infile);
        if str <> "" then
            Print("GAP read: ", str);
            # Conver to Gap object
            arr := JsonStringToGap(str);
            level := arr[1];
            Remove(arr, 1);
            Print("Level: ", level, "\n");
            # iterate over all polytopes
            equiv := 0;
            for poly in all_polys do
                res := RepresentativeAction(GRP_RED, poly, arr, OnSets);
                if res <> fail then
                    equiv := 1;
                    IO_WriteLine(outfile, "true");
                    break;
                fi;
            od;
            if equiv = 0 then
                Add(all_polys, arr);
                Print("All_polys: ", all_polys, "\n");
                IO_WriteLine(outfile, "false");
            fi;
        fi;
od;

